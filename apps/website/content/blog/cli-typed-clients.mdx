---
title: "Generate Typed MCP Clients with @xmcp-dev/cli"
description: "Produce fully typed MCP clients from remote servers or STDIO packages with one command."
category: "guides"
date: "2025-12-09"
order: 7
previewImage: "/blog/cli-typed-clients.png"
---

xmcp now let's you generate tools for external clients.

## How it works

Run the following command:
```bash
npx @xmcp-dev/cli generate
```
This command will fetch the tools from the MCP servers (HTTP or STDIO) and generate typed tools for you to use inside your tools.

## Prerequisites
- Node.js 20+ installed
- An MCP server URL and/or an installed STDIO package (e.g., `@playwright/mcp`)
- Any required env vars (e.g., `API_KEY`) available to the CLI (if you use headers)

## Describe your clients
You need to create the `clients.ts` in the `/src` directory and then add the MCP servers. HTTP entries can forward headers; STDIO entries spawn npm packages.

```typescript
// src/clients.ts
export const clients = {
  context7: {
    url: "https://mcp.context7.com/mcp",
    headers: [{ name: "CONTEXT7_API_KEY", env: "API_KEY" }],
  },
  playwright: {
    npm: "@playwright/mcp",
  },
};
```

<Callout variant="warning" icon="alertTriangle" title="Headers and secrets">
Use `env` for secrets (e.g., `API_KEY`) so the generated client reads from your environment. Only use `value` for non-sensitive static headers.
</Callout>

## Generate typed clients
Run the generator from your project root. By default it looks for `src/clients.ts` and writes to `src/generated`.

```bash
npx @xmcp-dev/cli generate
```

You can also specify the output directory and the clients file path, check out the [CLI documentation](https://github.com/basementstudio/xmcp/blob/canary/packages/cli/README.md#optional-cli-flags) for more details.

## Use the generated clients
The generator emits `client.index.ts` with ready-to-use factories and instances for every entry in your config.

```typescript
import { generatedClients } from "./generated/client.index";

export default async function handler({ url }: InferSchema<typeof schema>) {
  // Replace with the tool names your servers expose
  const context7Result = await generatedClients.context7.getLibraryDocs({ libraryName: "xmcp" });
  const playwrightResult = await generatedClients.playwright.browserNavigate({
    url: "https://www.xmcp.dev",
  });

  return `Context7 result: ${context7Result}, Playwright result: ${playwrightResult}`;
}
```

### Build and run the example
You can test this with the `examples/external-clients` project, just run the following commands:

```bash
pnpm install
pnpm dev
```

## Contributing

Share your feedback and help shape the future of xmcp:
[GitHub](https://github.com/basementstudio/xmcp)