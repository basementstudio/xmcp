---
title: "Connect to externals and make their tools yours"
description: "Produce fully typed MCP clients from remote servers or STDIO packages with one command."
category: "guides"
date: "2025-12-09"
order: 7
previewImage: "/blog/cli-typed-clients.png"
---

xmcp now let's you generate tools for external clients.

# How it works

## Add your clients
You need to create the `clients.ts` in the `/src` directory and then add the MCP servers. HTTP entries can forward headers; STDIO entries spawn npm packages.

```typescript
// src/clients.ts
export const clients = {
  context7: {
    url: "https://mcp.context7.com/mcp",
    headers: [{ name: "CONTEXT7_API_KEY", env: "API_KEY" }],
  },
  playwright: {
    npm: "@playwright/mcp",
  },
};
```

<Callout variant="warning" icon="alertTriangle" title="Headers and secrets">
Use `env` for secrets (e.g., `API_KEY`) so the generated client reads from your environment. Only use `value` for non-sensitive static headers.
</Callout>

## Generate typed clients
Run the generator from your project root. By default it looks for `src/clients.ts` and writes to `src/generated`.

```bash
npx @xmcp-dev/cli generate
```

You can also specify the output directory and the clients file path, check out the [CLI documentation](https://github.com/basementstudio/xmcp/blob/canary/packages/cli/README.md#optional-cli-flags) for more details.

## Using the new tools
We will now have the tools from our external clients in the `client.index.ts` file, now you only have to import the tools and use them inside your tools.

```typescript
import { InferSchema, type ToolMetadata } from "xmcp";
import { generatedClients } from "../generated/client.index";
import { z } from "zod";

export const schema = {
  url: z.string().describe("The URL to navigate to"),
};

// Define tool metadata
export const metadata: ToolMetadata = {
  name: "browser-navigate",
  description: "Navigate to a URL",
};

// Tool implementation
export default async function handler({ url }: InferSchema<typeof schema>) {
  await generatedClients.playwright.browserNavigate({
    url,
  });

  return `Navigated to: ${url}`;
}
```

```typescript
import { InferSchema, type ToolMetadata } from "xmcp";
import { generatedClients } from "../generated/client.index";
import { z } from "zod";

export const schema = {
  libraryName: z.string().describe("The name of the library to get docs for"),
};

// Define tool metadata
export const metadata: ToolMetadata = {
  name: "get-library-docs",
  description: "Get the docs for a library",
};

// Tool implementation
export default async function handler({ libraryName }: InferSchema<typeof schema>) {
  await generatedClients.context7.getLibraryDocs({
    libraryName: "xmcp",
  });

  return `Library docs: ${libraryDocs}`;
}
```

### Build and run the example
You can test this in [examples/external-clients](https://github.com/basementstudio/xmcp/tree/canary/examples/external-clients).

## Contributing

Share your feedback and help shape the future of xmcp:
[GitHub](https://github.com/basementstudio/xmcp)